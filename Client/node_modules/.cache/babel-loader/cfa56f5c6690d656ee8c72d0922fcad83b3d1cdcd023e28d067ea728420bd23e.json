{"ast":null,"code":"import\"../../css/Board.css\";import Ranks from\"./bits/Ranks.js\";import Files from\"./bits/Files\";import Pieces from\"../Pieces/Pieces\";import{useAppContext}from\"../../contexts/Context\";import Popup from\"../Popup/Popup\";import PromotionBox from\"../Popup/PromotionBox/Promotions\";import arbiter from\"../../arbiter/arbiter\";import{getKingPosition}from\"../../arbiter/getMoves\";import GameEnds from\"../Popup/GameEnds/GameEnds\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Board=function Board(){var ranks=Array(8).fill().map(function(x,i){return 8-i;});var files=Array(8).fill().map(function(x,i){return i+1;});var _useAppContext=useAppContext(),appState=_useAppContext.appState;var position=appState.position[appState.position.length-1];var checkTile=function(){var isInCheck=arbiter.isPlayerInCheck({positionAfterMove:position,player:appState.turn});if(isInCheck)return getKingPosition(position,appState.turn);return null;}();var getClassName=function getClassName(i,j){var _appState$candidateMo;var c=\"tile\";c+=(i+j)%2===0?\" tile--dark \":\" tile--light \";if((_appState$candidateMo=appState.candidateMoves)!==null&&_appState$candidateMo!==void 0&&_appState$candidateMo.find(function(m){return m[0]===i&&m[1]===j;})){if(position[i][j])c+=\" attacking\";else c+=\" highlight\";}if(checkTile&&checkTile[0]===i&&checkTile[1]===j){c+=\" checked\";}return c;};return/*#__PURE__*/_jsxs(\"div\",{className:\"board\",children:[/*#__PURE__*/_jsx(Ranks,{ranks:ranks}),/*#__PURE__*/_jsx(\"div\",{className:\"tiles\",children:ranks.map(function(rank,i){return files.map(function(file,j){return/*#__PURE__*/_jsx(\"div\",{i:i,j:j,className:\"\".concat(getClassName(7-i,j))},file+\"\"+rank);});})}),/*#__PURE__*/_jsx(Pieces,{}),/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(PromotionBox,{}),/*#__PURE__*/_jsx(GameEnds,{})]}),/*#__PURE__*/_jsx(Files,{files:files})]});};export default Board;","map":{"version":3,"names":["Ranks","Files","Pieces","useAppContext","Popup","PromotionBox","arbiter","getKingPosition","GameEnds","jsx","_jsx","jsxs","_jsxs","Board","ranks","Array","fill","map","x","i","files","_useAppContext","appState","position","length","checkTile","isInCheck","isPlayerInCheck","positionAfterMove","player","turn","getClassName","j","_appState$candidateMo","c","candidateMoves","find","m","className","children","rank","file","concat"],"sources":["/home/ahmed-bashir/React-projects/chess/src/components/Board/Board.js"],"sourcesContent":["import \"../../css/Board.css\";\nimport Ranks from \"./bits/Ranks.js\";\nimport Files from \"./bits/Files\";\nimport Pieces from \"../Pieces/Pieces\";\nimport { useAppContext } from \"../../contexts/Context\";\nimport Popup from \"../Popup/Popup\";\nimport PromotionBox from \"../Popup/PromotionBox/Promotions\";\n\nimport arbiter from \"../../arbiter/arbiter\";\nimport { getKingPosition } from \"../../arbiter/getMoves\";\nimport GameEnds from \"../Popup/GameEnds/GameEnds\";\n\nconst Board = () => {\n  const ranks = Array(8)\n    .fill()\n    .map((x, i) => 8 - i);\n  const files = Array(8)\n    .fill()\n    .map((x, i) => i + 1);\n\n  const { appState } = useAppContext();\n  const position = appState.position[appState.position.length - 1];\n\n  const checkTile = (() => {\n    const isInCheck = arbiter.isPlayerInCheck({\n      positionAfterMove: position,\n      player: appState.turn,\n    });\n\n    if (isInCheck) return getKingPosition(position, appState.turn);\n\n    return null;\n  })();\n\n  const getClassName = (i, j) => {\n    let c = \"tile\";\n    c += (i + j) % 2 === 0 ? \" tile--dark \" : \" tile--light \";\n    if (appState.candidateMoves?.find((m) => m[0] === i && m[1] === j)) {\n      if (position[i][j]) c += \" attacking\";\n      else c += \" highlight\";\n    }\n\n    if (checkTile && checkTile[0] === i && checkTile[1] === j) {\n      c += \" checked\";\n    }\n\n    return c;\n  };\n\n  return (\n    <div className=\"board\">\n      <Ranks ranks={ranks} />\n\n      <div className=\"tiles\">\n        {ranks.map((rank, i) =>\n          files.map((file, j) => (\n            <div\n              key={file + \"\" + rank}\n              i={i}\n              j={j}\n              className={`${getClassName(7 - i, j)}`}\n            ></div>\n          ))\n        )}\n      </div>\n\n      <Pieces />\n\n      <Popup>\n          <PromotionBox />\n          <GameEnds />\n      </Popup>\n\n      <Files files={files} />\n    </div>\n  );\n};\n\nexport default Board;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}