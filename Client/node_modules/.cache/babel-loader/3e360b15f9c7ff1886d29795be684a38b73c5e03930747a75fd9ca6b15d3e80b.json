{"ast":null,"code":"var _jsxFileName = \"/home/ahmed-bashir/React-projects/chess/src/components/Popup/PromotionBox/Promotions.js\",\n  _s = $RefreshSig$();\nimport { useAppContext } from '../../../contexts/Context';\nimport { copyPosition } from '../../../helper';\nimport { makeNewMove, clearCandidates } from '../../../reducer/actions/move';\nimport './PromotionBox.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PromotionBox = _ref => {\n  _s();\n  let {\n    onClosePopup\n  } = _ref;\n  const {\n    appState,\n    dispatch\n  } = useAppContext();\n  const {\n    promotionSquare\n  } = appState;\n  if (!promotionSquare) return null;\n  const color = promotionSquare.x === 7 ? 'w' : 'b';\n  const options = ['q', 'r', 'b', 'n'];\n  const getPromotionBoxPosition = () => {\n    let style = {};\n    if (promotionSquare.x === 7) {\n      style.top = '-12.5%';\n    } else {\n      style.top = '97.5%';\n    }\n    if (promotionSquare.y <= 1) {\n      style.left = '0%';\n    } else if (promotionSquare.y >= 5) {\n      style.right = '0%';\n    } else {\n      style.left = `${12.5 * promotionSquare.y - 20}%`;\n    }\n    return style;\n  };\n  const onClick = option => {\n    onClosePopup();\n    const newPosition = copyPosition(appState.position[appState.position.length - 1]);\n    newPosition[promotionSquare.rank][promotionSquare.file] = '';\n    newPosition[promotionSquare.x][promotionSquare.y] = color + option;\n    dispatch(clearCandidates());\n    dispatch(makeNewMove({\n      newPosition\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popup--inner promotion-choices\",\n    style: getPromotionBoxPosition(),\n    children: options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => onClick(option),\n      className: `piece ${color}${option}`\n    }, option, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 12\n  }, this);\n};\n_s(PromotionBox, \"9HfR4pGMswhBysZW+/Nr6Oc3i60=\", false, function () {\n  return [useAppContext];\n});\n_c = PromotionBox;\nexport default PromotionBox;\nvar _c;\n$RefreshReg$(_c, \"PromotionBox\");","map":{"version":3,"names":["useAppContext","copyPosition","makeNewMove","clearCandidates","jsxDEV","_jsxDEV","PromotionBox","_ref","_s","onClosePopup","appState","dispatch","promotionSquare","color","x","options","getPromotionBoxPosition","style","top","y","left","right","onClick","option","newPosition","position","length","rank","file","className","children","map","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/ahmed-bashir/React-projects/chess/src/components/Popup/PromotionBox/Promotions.js"],"sourcesContent":["import { useAppContext }from '../../../contexts/Context'\nimport { copyPosition,  } from '../../../helper';\nimport { makeNewMove , clearCandidates } from '../../../reducer/actions/move';\nimport './PromotionBox.css'\n\nconst PromotionBox = ({onClosePopup}) => {\n\n    const { appState , dispatch } = useAppContext();\n    const {promotionSquare} = appState;\n\n    if (!promotionSquare)\n        return null\n\n    const color = promotionSquare.x === 7 ? 'w' : 'b'\n    const options = ['q','r','b','n']\n\n    const getPromotionBoxPosition = () => {\n        let style = {}\n\n        if (promotionSquare.x === 7) {\n            style.top = '-12.5%'\n        }\n        else{\n            style.top = '97.5%'\n        }\n\n        if (promotionSquare.y <= 1){\n            style.left = '0%'\n        }\n        else if (promotionSquare.y >= 5){\n            style.right = '0%'\n        }\n        else {\n            style.left = `${12.5*promotionSquare.y - 20}%`\n        }\n\n        return style\n    }\n\n    const onClick = option => {\n        onClosePopup()\n        const newPosition = copyPosition (appState.position[appState.position.length - 1])\n        \n        newPosition[promotionSquare.rank][promotionSquare.file] = ''\n        newPosition[promotionSquare.x][promotionSquare.y] = color+option\n        \n        dispatch(clearCandidates())\n\n        dispatch(makeNewMove({newPosition}))\n    }\n\n    return <div className=\"popup--inner promotion-choices\" style={getPromotionBoxPosition()}>\n        {options.map (option => \n            <div key={option}\n                onClick = {() => onClick(option)} \n                className={`piece ${color}${option}`}\n            />\n        )}\n    </div>\n\n}\n\nexport default PromotionBox"],"mappings":";;AAAA,SAASA,aAAa,QAAO,2BAA2B;AACxD,SAASC,YAAY,QAAU,iBAAiB;AAChD,SAASC,WAAW,EAAGC,eAAe,QAAQ,+BAA+B;AAC7E,OAAO,oBAAoB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE3B,MAAMC,YAAY,GAAGC,IAAA,IAAoB;EAAAC,EAAA;EAAA,IAAnB;IAACC;EAAY,CAAC,GAAAF,IAAA;EAEhC,MAAM;IAAEG,QAAQ;IAAGC;EAAS,CAAC,GAAGX,aAAa,EAAE;EAC/C,MAAM;IAACY;EAAe,CAAC,GAAGF,QAAQ;EAElC,IAAI,CAACE,eAAe,EAChB,OAAO,IAAI;EAEf,MAAMC,KAAK,GAAGD,eAAe,CAACE,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG;EACjD,MAAMC,OAAO,GAAG,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC;EAEjC,MAAMC,uBAAuB,GAAGA,CAAA,KAAM;IAClC,IAAIC,KAAK,GAAG,CAAC,CAAC;IAEd,IAAIL,eAAe,CAACE,CAAC,KAAK,CAAC,EAAE;MACzBG,KAAK,CAACC,GAAG,GAAG,QAAQ;IACxB,CAAC,MACG;MACAD,KAAK,CAACC,GAAG,GAAG,OAAO;IACvB;IAEA,IAAIN,eAAe,CAACO,CAAC,IAAI,CAAC,EAAC;MACvBF,KAAK,CAACG,IAAI,GAAG,IAAI;IACrB,CAAC,MACI,IAAIR,eAAe,CAACO,CAAC,IAAI,CAAC,EAAC;MAC5BF,KAAK,CAACI,KAAK,GAAG,IAAI;IACtB,CAAC,MACI;MACDJ,KAAK,CAACG,IAAI,GAAI,GAAE,IAAI,GAACR,eAAe,CAACO,CAAC,GAAG,EAAG,GAAE;IAClD;IAEA,OAAOF,KAAK;EAChB,CAAC;EAED,MAAMK,OAAO,GAAGC,MAAM,IAAI;IACtBd,YAAY,EAAE;IACd,MAAMe,WAAW,GAAGvB,YAAY,CAAES,QAAQ,CAACe,QAAQ,CAACf,QAAQ,CAACe,QAAQ,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC;IAElFF,WAAW,CAACZ,eAAe,CAACe,IAAI,CAAC,CAACf,eAAe,CAACgB,IAAI,CAAC,GAAG,EAAE;IAC5DJ,WAAW,CAACZ,eAAe,CAACE,CAAC,CAAC,CAACF,eAAe,CAACO,CAAC,CAAC,GAAGN,KAAK,GAACU,MAAM;IAEhEZ,QAAQ,CAACR,eAAe,EAAE,CAAC;IAE3BQ,QAAQ,CAACT,WAAW,CAAC;MAACsB;IAAW,CAAC,CAAC,CAAC;EACxC,CAAC;EAED,oBAAOnB,OAAA;IAAKwB,SAAS,EAAC,gCAAgC;IAACZ,KAAK,EAAED,uBAAuB,EAAG;IAAAc,QAAA,EACnFf,OAAO,CAACgB,GAAG,CAAER,MAAM,iBAChBlB,OAAA;MACIiB,OAAO,EAAIA,CAAA,KAAMA,OAAO,CAACC,MAAM,CAAE;MACjCM,SAAS,EAAG,SAAQhB,KAAM,GAAEU,MAAO;IAAE,GAF/BA,MAAM;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAGd;EACL;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACC;AAEV,CAAC;AAAA3B,EAAA,CAvDKF,YAAY;EAAA,QAEkBN,aAAa;AAAA;AAAAoC,EAAA,GAF3C9B,YAAY;AAyDlB,eAAeA,YAAY;AAAA,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}