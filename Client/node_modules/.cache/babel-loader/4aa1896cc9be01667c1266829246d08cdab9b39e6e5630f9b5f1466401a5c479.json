{"ast":null,"code":"import { PieceType, TeamType } from \"../components/chessboard\";\nexport default class Referee {\n  // Function tileIsOccupied used for if a tile is occupied by another piece\n  tileIsOccupied(x, y, boardState) {\n    const piece = boardState.find(p => p.x === x && p.y === y);\n    if (piece) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  // Function to show if a tile is occupied by enemy\n  tileIsOccupiedByOpponent(x, y, boardState, team) {\n    const piece = boardState.find(p => p.x === x && p.y === y && p.team !== team);\n    if (piece) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  isEnPassantMove(px, py, x, y, type, team, boardState) {\n    const pawnDirection = team === TeamType.OUR ? 1 : -1;\n    if (type === PieceType.PAWN) {\n      if ((x - px === -1 || x - px === 1) && y - py === pawnDirection) {\n        const piece = boardState.find(p => p.x === x && p.y === y - pawnDirection && p.enPassant);\n      }\n    }\n    return false;\n  }\n\n  // Function move pawn\n  isValidMove(px, py, x, y, type, team, boardState) {\n    // Pawns Valid Moves\n\n    if (type === PieceType.PAWN) {\n      const specialRow = team === TeamType.OUR ? 1 : 6;\n      const pawnDirection = team === TeamType.OUR ? 1 : -1;\n\n      // Movement LOGIC\n      if (px === x && py === specialRow && y - py === 2 * pawnDirection) {\n        if (!this.tileIsOccupied(x, y, boardState) && !this.tileIsOccupied(x, y - pawnDirection, boardState)) {\n          return true;\n        }\n      } else if (px === x && y - py === 1 * pawnDirection) {\n        if (!this.tileIsOccupied(x, y, boardState)) {\n          return true;\n        }\n      }\n      // Attack Logic\n      else if (x - px === -1 && y - py === pawnDirection) {\n        // Attack in Upper or Bottom left corner\n        if (this.tileIsOccupiedByOpponent(x, y, boardState, team)) {\n          // console.log(\"We can strike!\");\n          return true;\n        }\n      } else if (x - px === 1 && y - py === pawnDirection) {\n        // Attack in Upper or Bottom right corner\n        if (this.tileIsOccupiedByOpponent(x, y, boardState, team)) {\n          // console.log(\"We can strike!\");\n\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n}","map":{"version":3,"names":["PieceType","TeamType","Referee","tileIsOccupied","x","y","boardState","piece","find","p","tileIsOccupiedByOpponent","team","isEnPassantMove","px","py","type","pawnDirection","OUR","PAWN","enPassant","isValidMove","specialRow"],"sources":["/home/ahmed-bashir/React-projects/chess/src/referee/Referee.ts"],"sourcesContent":["import { PieceType, TeamType, Piece } from \"../components/chessboard\";\n\nexport default class Referee {\n  // Function tileIsOccupied used for if a tile is occupied by another piece\n  tileIsOccupied(x: number, y: number, boardState: Piece[]): boolean {\n    const piece = boardState.find((p) => p.x === x && p.y === y);\n\n    if (piece) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  // Function to show if a tile is occupied by enemy\n  tileIsOccupiedByOpponent(\n    x: number,\n    y: number,\n    boardState: Piece[],\n    team: TeamType\n  ): boolean {\n    const piece = boardState.find(\n      (p) => p.x === x && p.y === y && p.team !== team\n    );\n\n    if (piece) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isEnPassantMove(\n    px: number,\n    py: number,\n    x: number,\n    y: number,\n    type: PieceType,\n    team: TeamType,\n    boardState: Piece[]\n  ) {\n    const pawnDirection = team === TeamType.OUR ? 1 : -1;\n\n    if (type === PieceType.PAWN) {\n      if ((x - px === -1 || x - px === 1) && y - py === pawnDirection) {\n        const piece = boardState.find(\n          (p) => p.x === x && p.y === y - pawnDirection && p.enPassant\n        );\n      }\n    }\n\n    return false;\n  }\n\n  // Function move pawn\n  isValidMove(\n    px: number,\n    py: number,\n    x: number,\n    y: number,\n    type: PieceType,\n    team: TeamType,\n    boardState: Piece[]\n  ) {\n    // Pawns Valid Moves\n\n    if (type === PieceType.PAWN) {\n      const specialRow = team === TeamType.OUR ? 1 : 6;\n      const pawnDirection = team === TeamType.OUR ? 1 : -1;\n\n      // Movement LOGIC\n      if (px === x && py === specialRow && y - py === 2 * pawnDirection) {\n        if (\n          !this.tileIsOccupied(x, y, boardState) &&\n          !this.tileIsOccupied(x, y - pawnDirection, boardState)\n        ) {\n          return true;\n        }\n      } else if (px === x && y - py === 1 * pawnDirection) {\n        if (!this.tileIsOccupied(x, y, boardState)) {\n          return true;\n        }\n      }\n      // Attack Logic\n      else if (x - px === -1 && y - py === pawnDirection) {\n        // Attack in Upper or Bottom left corner\n        if (this.tileIsOccupiedByOpponent(x, y, boardState, team)) {\n          // console.log(\"We can strike!\");\n          return true;\n        }\n      } else if (x - px === 1 && y - py === pawnDirection) {\n        // Attack in Upper or Bottom right corner\n        if (this.tileIsOccupiedByOpponent(x, y, boardState, team)) {\n          // console.log(\"We can strike!\");\n\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}