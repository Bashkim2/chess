{"ast":null,"code":"import arbiter from\"../../arbiter/arbiter\";import{useAppContext}from\"../../contexts/Context\";import{generateCandidates}from\"../../reducer/actions/move\";import{jsx as _jsx}from\"react/jsx-runtime\";var Piece=function Piece(_ref){var rank=_ref.rank,file=_ref.file,piece=_ref.piece;var _useAppContext=useAppContext(),appState=_useAppContext.appState,dispatch=_useAppContext.dispatch;var turn=appState.turn,castleDirection=appState.castleDirection,currentPosition=appState.position;var onDragStart=function onDragStart(e){e.dataTransfer.effectAllowed=\"move\";e.dataTransfer.setData(\"text/plain\",\"\".concat(piece,\",\").concat(rank,\",\").concat(file));setTimeout(function(){e.target.style.display=\"none\";},0);if(turn===piece[0]){var candidateMoves=arbiter.getValidMoves({position:currentPosition[currentPosition.length-1],prevPosition:currentPosition[currentPosition.length-2],castleDirection:castleDirection[turn],piece:piece,file:file,rank:rank});dispatch(generateCandidates({candidateMoves:candidateMoves}));}};var onDragEnd=function onDragEnd(e){e.target.style.display=\"block\";};return/*#__PURE__*/_jsx(\"div\",{className:\"piece \".concat(piece,\" p-\").concat(file).concat(rank),draggable:true,onDragStart:onDragStart,onDragEnd:onDragEnd});};export default Piece;","map":{"version":3,"names":["arbiter","useAppContext","generateCandidates","jsx","_jsx","Piece","_ref","rank","file","piece","_useAppContext","appState","dispatch","turn","castleDirection","currentPosition","position","onDragStart","e","dataTransfer","effectAllowed","setData","concat","setTimeout","target","style","display","candidateMoves","getValidMoves","length","prevPosition","onDragEnd","className","draggable"],"sources":["/home/ahmed-bashir/React-projects/chess/src/components/Pieces/Piece.js"],"sourcesContent":["import arbiter from \"../../arbiter/arbiter\";\nimport { useAppContext } from \"../../contexts/Context\";\nimport { generateCandidates } from \"../../reducer/actions/move\";\n\nconst Piece = ({ rank, file, piece }) => {\n  const { appState, dispatch } = useAppContext();\n  const { turn, castleDirection, position: currentPosition } = appState;\n\n  const onDragStart = (e) => {\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/plain\", `${piece},${rank},${file}`);\n    setTimeout(() => {\n      e.target.style.display = \"none\";\n    }, 0);\n\n    if (turn === piece[0]) {\n      const candidateMoves = arbiter.getValidMoves({\n        position: currentPosition[currentPosition.length - 1],\n        prevPosition: currentPosition[currentPosition.length - 2],\n        castleDirection: castleDirection[turn],\n        piece,\n        file,\n        rank,\n      });\n      dispatch(generateCandidates({ candidateMoves }));\n    }\n  };\n  const onDragEnd = (e) => {\n    e.target.style.display = \"block\";\n  };\n\n  return (\n    <div\n      className={`piece ${piece} p-${file}${rank}`}\n      draggable={true}\n      onDragStart={onDragStart}\n      onDragEnd={onDragEnd}\n    />\n  );\n};\n\nexport default Piece;\n"],"mappings":"AAAA,MAAO,CAAAA,OAAO,KAAM,uBAAuB,CAC3C,OAASC,aAAa,KAAQ,wBAAwB,CACtD,OAASC,kBAAkB,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhE,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAAC,IAAA,CAA8B,IAAxB,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,IAAI,CAAAF,IAAA,CAAJE,IAAI,CAAEC,KAAK,CAAAH,IAAA,CAALG,KAAK,CAChC,IAAAC,cAAA,CAA+BT,aAAa,EAAE,CAAtCU,QAAQ,CAAAD,cAAA,CAARC,QAAQ,CAAEC,QAAQ,CAAAF,cAAA,CAARE,QAAQ,CAC1B,GAAQ,CAAAC,IAAI,CAAiDF,QAAQ,CAA7DE,IAAI,CAAEC,eAAe,CAAgCH,QAAQ,CAAvDG,eAAe,CAAYC,eAAe,CAAKJ,QAAQ,CAAtCK,QAAQ,CAEvC,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,CAAC,CAAK,CACzBA,CAAC,CAACC,YAAY,CAACC,aAAa,CAAG,MAAM,CACrCF,CAAC,CAACC,YAAY,CAACE,OAAO,CAAC,YAAY,IAAAC,MAAA,CAAKb,KAAK,MAAAa,MAAA,CAAIf,IAAI,MAAAe,MAAA,CAAId,IAAI,EAAG,CAChEe,UAAU,CAAC,UAAM,CACfL,CAAC,CAACM,MAAM,CAACC,KAAK,CAACC,OAAO,CAAG,MAAM,CACjC,CAAC,CAAE,CAAC,CAAC,CAEL,GAAIb,IAAI,GAAKJ,KAAK,CAAC,CAAC,CAAC,CAAE,CACrB,GAAM,CAAAkB,cAAc,CAAG3B,OAAO,CAAC4B,aAAa,CAAC,CAC3CZ,QAAQ,CAAED,eAAe,CAACA,eAAe,CAACc,MAAM,CAAG,CAAC,CAAC,CACrDC,YAAY,CAAEf,eAAe,CAACA,eAAe,CAACc,MAAM,CAAG,CAAC,CAAC,CACzDf,eAAe,CAAEA,eAAe,CAACD,IAAI,CAAC,CACtCJ,KAAK,CAALA,KAAK,CACLD,IAAI,CAAJA,IAAI,CACJD,IAAI,CAAJA,IACF,CAAC,CAAC,CACFK,QAAQ,CAACV,kBAAkB,CAAC,CAAEyB,cAAc,CAAdA,cAAe,CAAC,CAAC,CAAC,CAClD,CACF,CAAC,CACD,GAAM,CAAAI,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAIb,CAAC,CAAK,CACvBA,CAAC,CAACM,MAAM,CAACC,KAAK,CAACC,OAAO,CAAG,OAAO,CAClC,CAAC,CAED,mBACEtB,IAAA,QACE4B,SAAS,UAAAV,MAAA,CAAWb,KAAK,QAAAa,MAAA,CAAMd,IAAI,EAAAc,MAAA,CAAGf,IAAI,CAAG,CAC7C0B,SAAS,CAAE,IAAK,CAChBhB,WAAW,CAAEA,WAAY,CACzBc,SAAS,CAAEA,SAAU,EACrB,CAEN,CAAC,CAED,cAAe,CAAA1B,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}