{"ast":null,"code":"import _objectSpread from\"/home/ahmed-bashir/React-projects/chess/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useAppContext}from\"../../../contexts/Context\";import{copyPosition,getNewMoveNotation}from\"../../../helpful/helper\";import{clearCandidates,makeNewMove}from\"../../../reducer/actions/move\";import\"../../../css/PromotionBox.css\";import{jsx as _jsx}from\"react/jsx-runtime\";var PromotionBox=function PromotionBox(_ref){var onClosePopup=_ref.onClosePopup;var _useAppContext=useAppContext(),appState=_useAppContext.appState,dispatch=_useAppContext.dispatch;var promotionSquare=appState.promotionSquare;if(!promotionSquare)return null;var color=promotionSquare.x===7?\"w\":\"b\";var options=[\"q\",\"r\",\"b\",\"n\"];var getPromotionBoxPosition=function getPromotionBoxPosition(){var style={};if(promotionSquare.x===7){style.top=\"-12.5%\";}else{style.top=\"97.5%\";}if(promotionSquare.y<=1){style.left=\"0%\";}else if(promotionSquare.y>=5){style.right=\"0%\";}else{style.left=\"\".concat(12.5*promotionSquare.y-20,\"%\");}return style;};var _onClick=function onClick(option){onClosePopup();var newPosition=copyPosition(appState.position[appState.position.length-1]);newPosition[promotionSquare.rank][promotionSquare.file]=\"\";newPosition[promotionSquare.x][promotionSquare.y]=color+option;var newMove=getNewMoveNotation(_objectSpread(_objectSpread({},appState.selectedPiece),{},{x:promotionSquare.rank,y:promotionSquare.file,position:appState.position[appState.position.length-1],promotesTo:option}));dispatch(clearCandidates());dispatch(makeNewMove({newPosition:newPosition,newMove:newMove}));};return/*#__PURE__*/_jsx(\"div\",{className:\"popup--inner promotion-choices\",style:getPromotionBoxPosition(),children:options.map(function(option){return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return _onClick(option);},className:\"piece \".concat(color).concat(option)},option);})});};export default PromotionBox;","map":{"version":3,"names":["useAppContext","copyPosition","getNewMoveNotation","clearCandidates","makeNewMove","jsx","_jsx","PromotionBox","_ref","onClosePopup","_useAppContext","appState","dispatch","promotionSquare","color","x","options","getPromotionBoxPosition","style","top","y","left","right","concat","onClick","option","newPosition","position","length","rank","file","newMove","_objectSpread","selectedPiece","promotesTo","className","children","map"],"sources":["/home/ahmed-bashir/React-projects/chess/src/components/Popup/PromotionBox/Promotions.js"],"sourcesContent":["import { useAppContext } from \"../../../contexts/Context\";\nimport { copyPosition, getNewMoveNotation } from \"../../../helpful/helper\";\nimport { clearCandidates, makeNewMove } from \"../../../reducer/actions/move\";\nimport \"../../../css/PromotionBox.css\";\n\nconst PromotionBox = ({ onClosePopup }) => {\n  const { appState, dispatch } = useAppContext();\n  const { promotionSquare } = appState;\n\n  if (!promotionSquare) return null;\n\n  const color = promotionSquare.x === 7 ? \"w\" : \"b\";\n  const options = [\"q\", \"r\", \"b\", \"n\"];\n\n  const getPromotionBoxPosition = () => {\n    let style = {};\n\n    if (promotionSquare.x === 7) {\n      style.top = \"-12.5%\";\n    } else {\n      style.top = \"97.5%\";\n    }\n\n    if (promotionSquare.y <= 1) {\n      style.left = \"0%\";\n    } else if (promotionSquare.y >= 5) {\n      style.right = \"0%\";\n    } else {\n      style.left = `${12.5 * promotionSquare.y - 20}%`;\n    }\n\n    return style;\n  };\n\n  const onClick = (option) => {\n    onClosePopup();\n    const newPosition = copyPosition(\n      appState.position[appState.position.length - 1]\n    );\n\n    newPosition[promotionSquare.rank][promotionSquare.file] = \"\";\n    newPosition[promotionSquare.x][promotionSquare.y] = color + option;\n    const newMove = getNewMoveNotation({\n      ...appState.selectedPiece,\n      x: promotionSquare.rank,\n      y: promotionSquare.file,\n      position: appState.position[appState.position.length - 1],\n      promotesTo: option,\n    });\n    dispatch(clearCandidates());\n\n    dispatch(makeNewMove({ newPosition, newMove }));\n  };\n\n  return (\n    <div\n      className=\"popup--inner promotion-choices\"\n      style={getPromotionBoxPosition()}\n    >\n      {options.map((option) => (\n        <div\n          key={option}\n          onClick={() => onClick(option)}\n          className={`piece ${color}${option}`}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default PromotionBox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}